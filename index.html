<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yusuf Yaman - Dijital SatÄ±ÅŸ AsistanÄ±</title>
    <meta name="description" content="Yusuf Yaman'Ä±n Dijital SatÄ±ÅŸ ve Organik BÃ¼yÃ¼me AsistanÄ± - Instagram, TikTok ve dijital Ã¼rÃ¼n satÄ±ÅŸÄ± konularÄ±nda yardÄ±mcÄ± olur.">
    <link rel="icon" href="https://raw.githubusercontent.com/huzaifi0604/Favicon/main/favicon.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #f7f7f8;
            --bg-secondary: #ffffff;
            --bg-sidebar: #202123;
            --text-primary: #1a1a1a;
            --text-secondary: #6e6e80;
            --text-on-primary: #ffffff;
            --border-color: #e5e5e6;
            --accent-color: #10a37f;
            --accent-hover: #0e8e6d;
            --sidebar-text: #ffffff;
            --user-message-bg: #10a37f;
            --user-message-text: #ffffff;
            --bot-message-bg: #ffffff;
            --bot-message-text: #1a1a1a;
            --shadow-color: rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] {
            --bg-primary: #1e1e2e;
            --bg-secondary: #2a2b32;
            --bg-sidebar: #0f0f17;
            --text-primary: #f1f1f3;
            --text-secondary: #acacbe;
            --text-on-primary: #f1f1f3;
            --border-color: #4d4d4f;
            --accent-color: #10a37f;
            --accent-hover: #0e8e6d;
            --sidebar-text: #ffffff;
            --user-message-bg: #10a37f;
            --user-message-text: #ffffff;
            --bot-message-bg: #2a2b32;
            --bot-message-text: #f1f1f3;
            --shadow-color: rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            height: 100vh;
            margin: 0;
            transition: background-color 0.3s, color 0.3s;
        }

        .app-container {
            display: flex;
            height: 100vh;
            max-width: 100%;
            margin: 0 auto;
        }

        .sidebar {
            width: 260px;
            background-color: var(--bg-sidebar);
            color: var(--sidebar-text);
            padding: 16px;
            display: flex;
            flex-direction: column;
            transition: background-color 0.3s;
        }

        .logo {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .logo img {
            width: 30px;
            height: 30px;
            margin-right: 10px;
            border-radius: 50%;
        }

        .logo h1 {
            font-size: 16px;
            font-weight: 600;
        }

        .new-chat-btn {
            background-color: var(--accent-color);
            color: var(--text-on-primary);
            border: none;
            border-radius: 5px;
            padding: 12px;
            font-size: 14px;
            cursor: pointer;
            margin-bottom: 20px;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .new-chat-btn:hover {
            background-color: var(--accent-hover);
        }

        .theme-switch-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .theme-text {
            font-size: 14px;
        }

        .theme-switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 22px;
        }

        .theme-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: .4s;
        }

        input:checked + .slider {
            background-color: var(--accent-color);
        }

        input:checked + .slider:before {
            transform: translateX(22px);
        }

        .slider.round {
            border-radius: 34px;
        }

        .slider.round:before {
            border-radius: 50%;
        }

        .history {
            flex-grow: 1;
            overflow-y: auto;
            margin-bottom: 20px;
        }

        .history-item {
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 5px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: background-color 0.2s;
        }

        .history-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .history-item.active {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .user-info {
            display: flex;
            align-items: center;
            padding: 10px;
            border-top: 1px solid var(--border-color);
            margin-top: auto;
        }

        .user-info img {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            margin-right: 10px;
        }

        .main-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            background-color: var(--bg-primary);
            transition: background-color 0.3s;
        }

        .chat-header {
            padding: 16px;
            border-bottom: 1px solid var(--border-color);
            background-color: var(--bg-secondary);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.3s, border-color 0.3s;
        }

        .chat-header h2 {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
        }

        #clearChatBtn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 16px;
            transition: color 0.2s;
        }

        #clearChatBtn:hover {
            color: var(--accent-color);
        }

        .chat-container {
            flex-grow: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 24px;
            background-color: var(--bg-primary);
            transition: background-color 0.3s;
        }

        .message {
            display: flex;
            max-width: 85%;
            animation: fadeIn 0.3s ease;
        }

        .bot-message {
            align-self: flex-start;
        }

        .user-message {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .avatar {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            margin: 0 8px;
            flex-shrink: 0;
            overflow: hidden;
        }

        .avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .user-message .avatar {
            display: none;
        }

        .message-content {
            padding: 15px;
            border-radius: 10px;
            font-size: 15px;
            line-height: 1.5;
            box-shadow: 0 1px 2px var(--shadow-color);
            transition: background-color 0.3s, color 0.3s, box-shadow 0.3s;
        }

        .bot-message .message-content {
            background-color: var(--bot-message-bg);
            color: var(--bot-message-text);
            border-top-left-radius: 0;
        }

        .user-message .message-content {
            background-color: var(--user-message-bg);
            color: var(--user-message-text);
            border-top-right-radius: 0;
        }

        .message-content p {
            margin-bottom: 10px;
        }

        .message-content p:last-child {
            margin-bottom: 0;
        }

        .message-content ul, .message-content ol {
            margin-left: 20px;
            margin-top: 5px;
            margin-bottom: 10px;
        }

        .message-content li {
            margin-bottom: 8px;
        }
        
        .message-content h3 {
            margin-top: 15px;
            margin-bottom: 10px;
            color: var(--accent-color);
        }
        
        .message-content strong {
            color: var(--accent-color);
        }

        .input-container {
            padding: 16px;
            background-color: var(--bg-secondary);
            border-top: 1px solid var(--border-color);
            display: flex;
            gap: 10px;
            align-items: flex-end;
            transition: background-color 0.3s, border-color 0.3s;
        }

        #userInput {
            flex-grow: 1;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px 15px;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            resize: none;
            outline: none;
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            max-height: 150px;
            overflow-y: auto;
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        }

        #userInput:focus {
            border-color: var(--accent-color);
        }

        #userInput::placeholder {
            color: var(--text-secondary);
        }

        #sendButton {
            background-color: var(--accent-color);
            color: var(--text-on-primary);
            border: none;
            border-radius: 8px;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s;
        }

        #sendButton:hover {
            background-color: var(--accent-hover);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-primary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--text-secondary);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-color);
        }

        .topic-section {
            margin-top: 10px;
            margin-bottom: 5px;
            padding-top: 10px;
            border-top: 1px solid var(--border-color);
        }

        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                max-height: 30vh;
                overflow-y: auto;
            }
            
            .main-content {
                height: 70vh;
            }
            
            .message {
                max-width: 90%;
            }
            
            .chat-container {
                padding: 10px;
                gap: 16px;
            }
            
            .message-content {
                padding: 12px;
                font-size: 14px;
            }
            
            .message-content ul, .message-content ol {
                margin-left: 16px;
            }
            
            .input-container {
                padding: 12px;
            }
            
            #userInput {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sol MenÃ¼ -->
        <div class="sidebar">
            <div class="logo">
                <img src="https://raw.githubusercontent.com/huzaifi0604/Favicon/main/favicon.png" alt="Logo">
                <h1>Dijital SatÄ±ÅŸ AsistanÄ±</h1>
            </div>
            
            <button class="new-chat-btn" id="newChatBtn">
                <span>+ Yeni Sohbet</span>
            </button>
            
            <div class="theme-switch-container">
                <span class="theme-text">KaranlÄ±k Mod</span>
                <label class="theme-switch">
                    <input type="checkbox" id="themeSwitch">
                    <span class="slider round"></span>
                </label>
            </div>
            
            <div class="history" id="historyContainer">
                <div class="history-item active" data-topic="welcome">
                    <span>HoÅŸ Geldiniz</span>
                </div>
                <div class="history-item" data-topic="instagram">
                    <span>Instagram Rehberi</span>
                </div>
                <div class="history-item" data-topic="tiktok">
                    <span>TikTok Stratejileri</span>
                </div>
                <div class="history-item" data-topic="dijitalurun">
                    <span>Dijital ÃœrÃ¼n OluÅŸturma</span>
                </div>
                <div class="history-item" data-topic="yapayzekaicin">
                    <span>Yapay Zeka AraÃ§larÄ±</span>
                </div>
                <div class="history-item" data-topic="niskonulari">
                    <span>NiÅŸ SeÃ§imi</span>
                </div>
                <div class="history-item" data-topic="monetizasyon">
                    <span>Monetizasyon YÃ¶ntemleri</span>
                </div>
                <div class="history-item" data-topic="contentplan">
                    <span>Ä°Ã§erik PlanÄ± OluÅŸturma</span>
                </div>
            </div>
            
            <div class="user-info">
                <img src="https://raw.githubusercontent.com/huzaifi0604/Favicon/main/favicon.png" alt="User">
                <span>Yusuf Yaman</span>
            </div>
        </div>

        <!-- Ana Ä°Ã§erik -->
        <div class="main-content">
            <!-- Sohbet BaÅŸlÄ±ÄŸÄ± -->
            <div class="chat-header">
                <h2>Dijital SatÄ±ÅŸ AsistanÄ±</h2>
                <button id="clearChatBtn" title="Sohbeti Temizle">
                    <span>ğŸ—‘ï¸</span>
                </button>
            </div>

            <!-- Sohbet AlanÄ± -->
            <div class="chat-container" id="chatContainer">
                <!-- Bot KarÅŸÄ±lama MesajÄ± otomatik olarak eklenecek -->
            </div>

            <!-- Mesaj GÃ¶nderme AlanÄ± -->
            <div class="input-container">
                <textarea id="userInput" placeholder="MesajÄ±nÄ±zÄ± buraya yazÄ±n..." rows="1"></textarea>
                <button id="sendButton">
                    <span>â¤</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elementleri
            const chatContainer = document.getElementById('chatContainer');
            const userInput = document.getElementById('userInput');
            const sendButton = document.getElementById('sendButton');
            const newChatBtn = document.getElementById('newChatBtn');
            const historyItems = document.querySelectorAll('.history-item');
            const clearChatBtn = document.getElementById('clearChatBtn');
            const themeSwitch = document.getElementById('themeSwitch');
            
            // Gemini API konfigÃ¼rasyonu
            const API_KEY = 'AIzaSyAhdRR0uKZvCGGV90NIfgu0TIUdsqFWKt4';
            const MODEL = 'gemini-2.0-flash';
            
            // Sistem talimatlarÄ±
            const systemInstructions = `
Sen Yusuf Yaman'Ä±n resmi Dijital SatÄ±ÅŸ ve Organik BÃ¼yÃ¼me eÄŸitim asistanÄ±sÄ±n. AÅŸaÄŸÄ±daki konularda uzman bir eÄŸitmensin:

- Sosyal Medya PlatformlarÄ± (Instagram ve TikTok)
- Organik BÃ¼yÃ¼me Stratejileri (algoritma, keÅŸfet, hashtag, CTA)
- Dijital SatÄ±ÅŸ Temelleri (dijital Ã¼rÃ¼nler, satÄ±ÅŸ sÃ¼reÃ§leri)
- NiÅŸ SeÃ§imi ve Ä°Ã§erik Ãœretimi (motivasyon, iliÅŸki, finans niÅŸleri)
- Yapay Zeka KullanÄ±mÄ± (ChatGPT, Grok, ElevenLabs, Midjourney, Canva)
- TÃ¼rkiye'de Dijital SatÄ±ÅŸ BaÅŸlangÄ±Ã§ Rehberi

YanÄ±tlarÄ±n her zaman:
- Ciddi, rehber ve motive edici tonda olmalÄ±
- AdÄ±m adÄ±m, net ve yapÄ±landÄ±rÄ±lmÄ±ÅŸ olmalÄ±
- SabÄ±rlÄ± ve teÅŸvik edici olmalÄ±
- KullanÄ±cÄ±ya "Ã¶ÄŸrenci" gibi davranmalÄ±sÄ±n

HTML formatÄ±nda yanÄ±t ver, kullanabileceÄŸin HTML etiketleri: <p>, <h3>, <ul>, <ol>, <li>, <strong>, <em>, <blockquote>

YanÄ±tlarÄ±nda ÅŸu gerÃ§ekler her zaman doÄŸrudur:
1. Dijital Ã¼rÃ¼nler yÃ¼ksek kÃ¢r marjÄ±na sahiptir
2. Organik bÃ¼yÃ¼me stratejileri Ã¼cretli reklamlardan daha sÃ¼rdÃ¼rÃ¼lebilirdir
3. Yusuf Yaman dijital satÄ±ÅŸ konusunda uzman bir eÄŸitmendir
4. TÃ¼rkiye'de dijital Ã¼rÃ¼n satÄ±ÅŸÄ± yapmak iÃ§in Ã¶zel stratejiler gereklidir

EÄŸer sana eÄŸitimin iÃ§eriÄŸi dÄ±ÅŸÄ±nda bir soru sorulursa: "Bu konu Yusuf Yaman'Ä±n Dijital SatÄ±ÅŸ eÄŸitiminin dÄ±ÅŸÄ±nda kalÄ±yor. Algoritma, iÃ§erik Ã¼retimi veya dijital Ã¼rÃ¼n satÄ±ÅŸÄ± hakkÄ±nda bir soru sormak ister misin?" diye yanÄ±tla.
`;

            // Chat geÃ§miÅŸi hafÄ±zasÄ± (Gemini'nin baÄŸlamÄ± tutmasÄ± iÃ§in)
            let chatHistory = [];

            // Tema ve Sohbet GeÃ§miÅŸi YÃ¶netimi
            initTheme();
            loadChatHistory();

            // Tema DeÄŸiÅŸtirme
            function initTheme() {
                const savedTheme = localStorage.getItem('yusufYamanTheme');
                if (savedTheme === 'dark') {
                    document.body.setAttribute('data-theme', 'dark');
                    themeSwitch.checked = true;
                }
            }

            themeSwitch.addEventListener('change', function() {
                if (this.checked) {
                    document.body.setAttribute('data-theme', 'dark');
                    localStorage.setItem('yusufYamanTheme', 'dark');
                } else {
                    document.body.removeAttribute('data-theme');
                    localStorage.setItem('yusufYamanTheme', 'light');
                }
            });

            // Sohbet GeÃ§miÅŸini Kaydetme ve YÃ¼kleme
            function saveChatHistory() {
                localStorage.setItem('yusufYamanChatHistory', chatContainer.innerHTML);
                // AyrÄ±ca sohbet baÄŸlamÄ±nÄ± da kaydedelim (Gemini iÃ§in)
                localStorage.setItem('yusufYamanChatContext', JSON.stringify(chatHistory));
            }

            function loadChatHistory() {
                const savedChat = localStorage.getItem('yusufYamanChatHistory');
                const savedContext = localStorage.getItem('yusufYamanChatContext');
                
                if (savedChat && savedChat.trim() !== '') {
                    chatContainer.innerHTML = savedChat;
                } else {
                    showWelcomeMessage();
                }
                
                if (savedContext) {
                    try {
                        chatHistory = JSON.parse(savedContext);
                    } catch (e) {
                        console.error('Chat context parsing error:', e);
                        chatHistory = [];
                    }
                }
                
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }

            // Sohbeti Temizleme
            clearChatBtn.addEventListener('click', function() {
                if (confirm('Sohbet geÃ§miÅŸini temizlemek istediÄŸinize emin misiniz?')) {
                    chatContainer.innerHTML = '';
                    chatHistory = []; // Gemini baÄŸlamÄ±nÄ± da temizle
                    localStorage.removeItem('yusufYamanChatHistory');
                    localStorage.removeItem('yusufYamanChatContext');
                    showWelcomeMessage();
                }
            });

            // HoÅŸ Geldin MesajÄ±
            function showWelcomeMessage() {
                const welcomeMessage = `
                    <div class="message bot-message">
                        <div class="avatar">
                            <img src="https://raw.githubusercontent.com/huzaifi0604/Favicon/main/favicon.png" alt="Bot Avatar">
                        </div>
                        <div class="message-content">
                            <p>Merhaba, ben Yusuf Yaman'Ä±n Dijital SatÄ±ÅŸ AsistanÄ±yÄ±m! Size nasÄ±l yardÄ±mcÄ± olabilirim?</p>
                            <p>AÅŸaÄŸÄ±daki konularda uzmanlaÅŸmÄ±ÅŸ durumdayÄ±m:</p>
                            <ul>
                                <li><strong>Instagram ve TikTok Stratejileri:</strong> Algoritma, keÅŸfete Ã§Ä±kma, iÃ§erik planlamasÄ±</li>
                                <li><strong>Dijital ÃœrÃ¼n OluÅŸturma:</strong> E-book, Ã§evrimiÃ§i kurslar, dijital ÅŸablonlar</li>
                                <li><strong>Yapay Zeka ile Ä°Ã§erik Ãœretimi:</strong> ChatGPT, Midjourney, ElevenLabs kullanÄ±m rehberleri</li>
                                <li><strong>NiÅŸ SeÃ§imi ve Pazar AraÅŸtÄ±rmasÄ±:</strong> KÃ¢rlÄ± dijital Ã¼rÃ¼n niÅŸleri bulma</li>
                                <li><strong>Monetizasyon Stratejileri:</strong> Dijital Ã¼rÃ¼nlerden para kazanma yÃ¶ntemleri</li>
                                <li><strong>Ä°Ã§erik PlanÄ± OluÅŸturma:</strong> 30-90 gÃ¼nlÃ¼k iÃ§erik takvimi hazÄ±rlama</li>
                            </ul>
                            <p>SorularÄ±nÄ±zÄ± sormaya baÅŸlayabilir veya soldaki menÃ¼den bir konu seÃ§ebilirsiniz!</p>
                        </div>
                    </div>
                `;
                chatContainer.innerHTML = welcomeMessage;
                // Bot'un mesajÄ±nÄ± chat geÃ§miÅŸine ekleyelim
                chatHistory.push({
                    role: "model",
                    parts: [{ text: "Merhaba, ben Yusuf Yaman'Ä±n Dijital SatÄ±ÅŸ AsistanÄ±yÄ±m! Size nasÄ±l yardÄ±mcÄ± olabilirim? AÅŸaÄŸÄ±daki konularda uzmanlaÅŸmÄ±ÅŸ durumdayÄ±m: Instagram ve TikTok Stratejileri, Dijital ÃœrÃ¼n OluÅŸturma, Yapay Zeka ile Ä°Ã§erik Ãœretimi, NiÅŸ SeÃ§imi ve Pazar AraÅŸtÄ±rmasÄ±, Monetizasyon Stratejileri, Ä°Ã§erik PlanÄ± OluÅŸturma. SorularÄ±nÄ±zÄ± sormaya baÅŸlayabilir veya soldaki menÃ¼den bir konu seÃ§ebilirsiniz!" }]
                });
                saveChatHistory();
            }

            // Mesaj GÃ¶nderme Ä°ÅŸlevi
            function sendMessage() {
                const message = userInput.value.trim();
                if (message === '') return;

                // KullanÄ±cÄ± mesajÄ±nÄ± ekle
                addMessage('user', `<p>${message}</p>`);
                
                // KullanÄ±cÄ± mesajÄ±nÄ± sohbet geÃ§miÅŸine ekle
                chatHistory.push({
                    role: "user",
                    parts: [{ text: message }]
                });
                
                // GiriÅŸ alanÄ±nÄ± temizle
                userInput.value = '';
                userInput.style.height = 'auto';
                
                // Botun cevap vermesini saÄŸla
                generateBotResponse(message);
            }

            // KullanÄ±cÄ± veya Bot MesajÄ± Ekleme
            function addMessage(type, content) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${type}-message`;
                
                let html = '';
                
                if (type === 'bot') {
                    html += `
                        <div class="avatar">
                            <img src="https://raw.githubusercontent.com/huzaifi0604/Favicon/main/favicon.png" alt="Bot Avatar">
                        </div>
                    `;
                }
                
                html += `<div class="message-content">${content}</div>`;
                
                messageDiv.innerHTML = html;
                chatContainer.appendChild(messageDiv);
                
                // Sohbeti en aÅŸaÄŸÄ± kaydÄ±r
                chatContainer.scrollTop = chatContainer.scrollHeight;
                
                // Sohbet geÃ§miÅŸini kaydet
                saveChatHistory();
                
                return messageDiv;
            }
            
            // Google Gemini API ile Bot YanÄ±tÄ± OluÅŸturma
            async function generateBotResponse(userMessage) {
                // YÃ¼kleniyor mesajÄ± ekle
                const loadingMessage = addMessage('bot', '<p><em>YanÄ±t yazÄ±lÄ±yor...</em></p>');
                
                try {
                    // API isteÄŸi iÃ§in gerekli URL ve veriler
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${MODEL}:generateContent?key=${API_KEY}`;
                    
                    // Sistem talimatlarÄ±yla kullanÄ±cÄ± mesajÄ±nÄ± birleÅŸtir
                    const promptWithSystem = systemInstructions + "\n\nÅimdi, kullanÄ±cÄ±nÄ±n ÅŸu sorusuna yanÄ±t ver: " + userMessage;
                    
                    // API isteÄŸinde kullanÄ±lacak veri
                    const requestData = {
                        contents: [
                            {
                                role: "user",
                                parts: [{ text: promptWithSystem }]
                            },
                            ...chatHistory.slice(-6) // Son birkaÃ§ mesajÄ± baÄŸlam olarak ekleyelim
                        ],
                        generationConfig: {
                            temperature: 0.7,
                            maxOutputTokens: 2048,
                            topP: 0.95,
                            topK: 50
                        },
                        safetySettings: [
                            {
                                category: "HARM_CATEGORY_HARASSMENT",
                                threshold: "BLOCK_MEDIUM_AND_ABOVE"
                            },
                            {
                                category: "HARM_CATEGORY_HATE_SPEECH",
                                threshold: "BLOCK_MEDIUM_AND_ABOVE"
                            },
                            {
                                category: "HARM_CATEGORY_SEXUALLY_EXPLICIT",
                                threshold: "BLOCK_MEDIUM_AND_ABOVE"
                            },
                            {
                                category: "HARM_CATEGORY_DANGEROUS_CONTENT",
                                threshold: "BLOCK_MEDIUM_AND_ABOVE"
                            }
                        ]
                    };
                    
                    // CORS sorunu Ã§Ã¶zÃ¼mÃ¼ iÃ§in proxy kullanÄ±mÄ±
                    // Not: Bu bir workaround, ideal olarak kendi backend'inizi kullanmalÄ±sÄ±nÄ±z
                    const proxyUrl = 'https://cors-anywhere.herokuapp.com/';
                    const finalUrl = apiUrl;
                    
                    // API'ye istek gÃ¶nder
                    const response = await fetch(finalUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(requestData)
                    });
                    
                    // API yanÄ±tÄ±nÄ± al
                    const data = await response.json();
                    
                    // YÃ¼kleniyor mesajÄ±nÄ± kaldÄ±r
                    chatContainer.removeChild(loadingMessage);
                    
                    // API yanÄ±tÄ±nÄ± kontrol et ve ekle
                    if (data.candidates && data.candidates[0] && data.candidates[0].content && data.candidates[0].content.parts && data.candidates[0].content.parts[0].text) {
                        const aiResponse = data.candidates[0].content.parts[0].text;
                        
                        // YanÄ±tÄ± sohbet geÃ§miÅŸine ekle
                        chatHistory.push({
                            role: "model",
                            parts: [{ text: aiResponse }]
                        });
                        
                        // YanÄ±tÄ± ekrana ekle
                        addMessage('bot', aiResponse);
                    } else {
                        // Fallback: EÄŸer API yanÄ±t vermezse yedek yanÄ±t
                        const fallbackResponse = `
                            <p>Ã–zÃ¼r dilerim, ÅŸu anda bir teknik sorun yaÅŸÄ±yorum ve Gemini API'ye baÄŸlanamÄ±yorum. Size ÅŸu konularda yardÄ±mcÄ± olabilirim:</p>
                            <ul>
                                <li><strong>Instagram ve TikTok bÃ¼yÃ¼me stratejileri</strong> hakkÄ±nda sorular sorabilirsiniz</li>
                                <li><strong>Dijital Ã¼rÃ¼n oluÅŸturma ve satÄ±ÅŸ</strong> konusunda bilgi alabilirsiniz</li>
                                <li><strong>Yapay zeka ile iÃ§erik Ã¼retimi</strong> hakkÄ±nda ipuÃ§larÄ± isteyebilirsiniz</li>
                                <li><strong>Ä°Ã§erik planlamasÄ± ve niÅŸ seÃ§imi</strong> ile ilgili danÄ±ÅŸabilirsiniz</li>
                            </ul>
                            <p>LÃ¼tfen tekrar sorunuzu sorar mÄ±sÄ±nÄ±z? Alternatif olarak, soldaki menÃ¼den bir konu seÃ§ebilirsiniz.</p>
                        `;
                        
                        // Yedek yanÄ±tÄ± ekle
                        addMessage('bot', fallbackResponse);
                    }
                } catch (error) {
                    console.error('API HatasÄ±:', error);
                    
                    // YÃ¼kleniyor mesajÄ±nÄ± kaldÄ±r
                    chatContainer.removeChild(loadingMessage);
                    
                    // Hata mesajÄ±nÄ± gÃ¶ster
                    addMessage('bot', `
                        <p>ÃœzgÃ¼nÃ¼m, bir teknik sorun oluÅŸtu. Bu genellikle aÅŸaÄŸÄ±daki nedenlerden kaynaklanÄ±r:</p>
                        <ul>
                            <li>CORS politikasÄ± sorunlarÄ± (tarayÄ±cÄ± kaynaklÄ±)</li>
                            <li>API anahtarÄ± limitleri veya kÄ±sÄ±tlamalarÄ±</li>
                            <li>GeÃ§ici sunucu sorunlarÄ±</li>
                        </ul>
                        <p>LÃ¼tfen tekrar deneyin veya soldaki menÃ¼den bir konu seÃ§erek devam edin.</p>
                        <p><em>Teknik detay: ${error.message}</em></p>
                    `);
                }
            }

            // Yeni Sohbet BaÅŸlatma
            newChatBtn.addEventListener('click', function() {
                if (confirm('Yeni bir sohbet baÅŸlatmak istediÄŸinize emin misiniz? Mevcut sohbet geÃ§miÅŸi silinecektir.')) {
                    chatContainer.innerHTML = '';
                    chatHistory = []; // Gemini baÄŸlamÄ±nÄ± da temizle
                    localStorage.removeItem('yusufYamanChatHistory');
                    localStorage.removeItem('yusufYamanChatContext');
                    showWelcomeMessage();
                }
            });

            // Sohbet GeÃ§miÅŸi Ã–ÄŸesi SeÃ§me
            historyItems.forEach(item => {
                item.addEventListener('click', function() {
                    document.querySelector('.history-item.active').classList.remove('active');
                    this.classList.add('active');
                    
                    // Konu bazlÄ± ekstra iÃ§erik gÃ¶sterme
                    const topic = this.getAttribute('data-topic');
                    if (topic) {
                        chatContainer.innerHTML = '';
                        chatHistory = []; // Gemini baÄŸlamÄ±nÄ± da temizle
                        
                        if (topic === 'welcome') {
                            showWelcomeMessage();
                        } else if (topic === 'instagram') {
                            addMessage('user', '<p>Instagram\'da keÅŸfete nasÄ±l Ã§Ä±karÄ±m?</p>');
                            chatHistory.push({
                                role: "user",
                                parts: [{ text: "Instagram'da keÅŸfete nasÄ±l Ã§Ä±karÄ±m?" }]
                            });
                            generateBotResponse("Instagram'da keÅŸfete nasÄ±l Ã§Ä±karÄ±m?");
                        } else if (topic === 'tiktok') {
                            addMessage('user', '<p>TikTok\'ta viral olmak iÃ§in ne yapmalÄ±yÄ±m?</p>');
                            chatHistory.push({
                                role: "user",
                                parts: [{ text: "TikTok'ta viral olmak iÃ§in ne yapmalÄ±yÄ±m?" }]
                            });
                            generateBotResponse("TikTok'ta viral olmak iÃ§in ne yapmalÄ±yÄ±m?");
                        } else if (topic === 'dijitalurun') {
                            addMessage('user', '<p>Dijital Ã¼rÃ¼n nasÄ±l oluÅŸturulur?</p>');
                            chatHistory.push({
                                role: "user",
                                parts: [{ text: "Dijital Ã¼rÃ¼n nasÄ±l oluÅŸturulur?" }]
                            });
                            generateBotResponse("Dijital Ã¼rÃ¼n nasÄ±l oluÅŸturulur?");
                        } else if (topic === 'yapayzekaicin') {
                            addMessage('user', '<p>Yapay zeka ile iÃ§erik Ã¼retimi nasÄ±l yapÄ±lÄ±r?</p>');
                            chatHistory.push({
                                role: "user",
                                parts: [{ text: "Yapay zeka ile iÃ§erik Ã¼retimi nasÄ±l yapÄ±lÄ±r?" }]
                            });
                            generateBotResponse("Yapay zeka ile iÃ§erik Ã¼retimi nasÄ±l yapÄ±lÄ±r?");
                        } else if (topic === 'niskonulari') {
                            addMessage('user', '<p>Dijital Ã¼rÃ¼n satÄ±ÅŸÄ± iÃ§in hangi niÅŸi seÃ§meliyim?</p>');
                            chatHistory.push({
                                role: "user",
                                parts: [{ text: "Dijital Ã¼rÃ¼n satÄ±ÅŸÄ± iÃ§in hangi niÅŸi seÃ§meliyim?" }]
                            });
                            generateBotResponse("Dijital Ã¼rÃ¼n satÄ±ÅŸÄ± iÃ§in hangi niÅŸi seÃ§meliyim?");
                        } else if (topic === 'monetizasyon') {
                            addMessage('user', '<p>Dijital iÃ§eriklerden nasÄ±l para kazanabilirim?</p>');
                            chatHistory.push({
                                role: "user",
                                parts: [{ text: "Dijital iÃ§eriklerden nasÄ±l para kazanabilirim?" }]
                            });
                            generateBotResponse("Dijital iÃ§eriklerden nasÄ±l para kazanabilirim?");
                        } else if (topic === 'contentplan') {
                            addMessage('user', '<p>Etkili bir iÃ§erik planÄ± nasÄ±l oluÅŸturabilirim?</p>');
                            chatHistory.push({
                                role: "user",
                                parts: [{ text: "Etkili bir iÃ§erik planÄ± nasÄ±l oluÅŸturabilirim?" }]
                            });
                            generateBotResponse("Etkili bir iÃ§erik planÄ± nasÄ±l oluÅŸturabilirim?");
                        }
                    }
                });
            });

            // Enter TuÅŸu ile GÃ¶nderme
            userInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });

            // GÃ¶nder Butonuna TÄ±klanÄ±nca
            sendButton.addEventListener('click', sendMessage);
            
            // Textarea YÃ¼kseklik Ayarlama
            userInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = (this.scrollHeight) + 'px';
                // Maksimum yÃ¼kseklik
                if (this.scrollHeight > 150) {
                    this.style.height = '150px';
                    this.style.overflowY = 'auto';
                }
            });

            // Sayfa kapanmadan Ã¶nce sohbeti kaydet
            window.onbeforeunload = function() {
                saveChatHistory();
            };
        });
    </script>
</body>
</html>
