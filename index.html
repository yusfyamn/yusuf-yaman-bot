<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yusuf Yaman - Dijital Satış Asistanı</title>
    <meta name="description" content="Yusuf Yaman'ın Dijital Satış ve Organik Büyüme Asistanı - Instagram, TikTok ve dijital ürün satışı konularında yardımcı olur.">
    <link rel="icon" href="https://raw.githubusercontent.com/huzaifi0604/Favicon/main/favicon.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            /* Ana Renkler */
            --bg-primary: #f7f9fc;
            --bg-secondary: #ffffff;
            --bg-sidebar: #0f172a;
            --bg-sidebar-item: #1e293b;
            --bg-sidebar-hover: #334155;
            --bg-message-user: #1d4ed8;
            --bg-message-bot: #ffffff;
            
            /* Metin Renkleri */
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --text-on-primary: #ffffff;
            --text-on-sidebar: #f8fafc;
            --text-accent: #2563eb;
            --text-user-message: #ffffff;
            --text-bot-message: #1e293b;
            
            /* Sınır ve Gölge */
            --border-color: #e2e8f0;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            
            /* Geçiş ve Animasyon */
            --transition-normal: all 0.3s ease;
            
            /* Accent Renkler */
            --accent-blue: #2563eb;
            --accent-blue-hover: #1d4ed8;
            --accent-green: #10b981;
            --accent-purple: #8b5cf6;
            --accent-red: #ef4444;

            /* Yuvarlatılmış köşeler */
            --radius-sm: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-full: 9999px;
        }

        [data-theme="dark"] {
            /* Ana Renkler */
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-sidebar: #020617;
            --bg-sidebar-item: #1e293b;
            --bg-sidebar-hover: #334155;
            --bg-message-user: #2563eb;
            --bg-message-bot: #1e293b;
            
            /* Metin Renkleri */
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --text-on-primary: #ffffff;
            --text-on-sidebar: #f8fafc;
            --text-accent: #3b82f6;
            --text-user-message: #ffffff;
            --text-bot-message: #f8fafc;
            
            /* Sınır ve Gölge */
            --border-color: #334155;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.2);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            height: 100vh;
            margin: 0;
            transition: var(--transition-normal);
        }

        /* Ana Uygulama Konteyneri */
        .app-container {
            display: flex;
            height: 100vh;
            max-width: 100%;
            margin: 0 auto;
            overflow: hidden;
        }

        /* Sidebar Tasarımı */
        .sidebar {
            width: 280px;
            background-color: var(--bg-sidebar);
            color: var(--text-on-sidebar);
            display: flex;
            flex-direction: column;
            transition: var(--transition-normal);
            overflow: hidden;
            position: relative;
            z-index: 10;
        }

        .sidebar-header {
            padding: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            border-bottom: 1px solid var(--border-color);
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo-container img {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-full);
            object-fit: cover;
        }

        .logo-container h1 {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-on-sidebar);
        }

        .mobile-close {
            display: none;
            font-size: 1.25rem;
            color: var(--text-on-sidebar);
            background: none;
            border: none;
            cursor: pointer;
        }

        .new-chat-btn {
            margin: 1rem;
            background-color: var(--accent-blue);
            color: var(--text-on-primary);
            border: none;
            border-radius: var(--radius-md);
            padding: 0.875rem 1rem;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            transition: var(--transition-normal);
            box-shadow: var(--shadow-sm);
        }

        .new-chat-btn:hover {
            background-color: var(--accent-blue-hover);
        }

        .new-chat-btn i {
            font-size: 0.875rem;
        }

        .sidebar-section {
            padding: 1rem;
        }

        .sidebar-section-title {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
            padding-left: 0.5rem;
        }

        /* Tema Değiştirici */
        .theme-switch-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.875rem;
            margin: 0 0.5rem;
            background-color: var(--bg-sidebar-item);
            border-radius: var(--radius-md);
            transition: var(--transition-normal);
        }

        .theme-switch-container:hover {
            background-color: var(--bg-sidebar-hover);
        }

        .theme-text {
            font-size: 0.875rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .theme-switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 22px;
        }

        .theme-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--text-secondary);
            transition: .4s;
            border-radius: var(--radius-full);
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--accent-blue);
        }

        input:checked + .slider:before {
            transform: translateX(22px);
        }

        /* Konuşma Geçmişi */
        .history {
            flex-grow: 1;
            overflow-y: auto;
            padding: 0 0.5rem;
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .history-item {
            padding: 0.75rem 1rem;
            border-radius: var(--radius-md);
            cursor: pointer;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.625rem;
            transition: var(--transition-normal);
            background-color: var(--bg-sidebar-item);
            color: var(--text-on-sidebar);
            margin-bottom: 0.25rem;
        }

        .history-item:hover {
            background-color: var(--bg-sidebar-hover);
        }

        .history-item.active {
            background-color: var(--accent-blue);
            color: var(--text-on-primary);
            font-weight: 500;
        }

        .history-item i {
            font-size: 0.875rem;
            width: 1rem;
            text-align: center;
        }

        /* Kullanıcı Bilgisi Bölümü */
        .user-info {
            display: flex;
            align-items: center;
            padding: 1rem;
            margin-top: auto;
            border-top: 1px solid var(--border-color);
            background-color: var(--bg-sidebar);
        }

        .user-info img {
            width: 28px;
            height: 28px;
            border-radius: var(--radius-full);
            margin-right: 0.75rem;
        }

        .user-info span {
            font-size: 0.875rem;
            font-weight: 500;
        }

        /* Ana İçerik Alanı */
        .main-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            background-color: var(--bg-primary);
            transition: var(--transition-normal);
            overflow: hidden;
            position: relative;
        }

        /* Üst Başlık */
        .chat-header {
            padding: 1rem 1.5rem;
            background-color: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow-sm);
            transition: var(--transition-normal);
            z-index: 5;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.25rem;
            color: var(--text-primary);
            cursor: pointer;
        }

        .chat-header h2 {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .header-actions {
            display: flex;
            gap: 0.5rem;
        }

        .action-button {
            background: none;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            width: 2.5rem;
            height: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-primary);
            cursor: pointer;
            transition: var(--transition-normal);
        }

        .action-button:hover {
            background-color: var(--bg-primary);
            color: var(--text-accent);
        }

        /* Sohbet Alanı */
        .chat-container {
            flex-grow: 1;
            overflow-y: auto;
            padding: 1.5rem 1rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            scroll-behavior: smooth;
            background-color: var(--bg-primary);
            transition: var(--transition-normal);
        }

        /* Mesaj Stilleri */
        .message {
            display: flex;
            max-width: 90%;
            animation: fadeIn 0.3s ease;
            position: relative;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .bot-message {
            align-self: flex-start;
        }

        .user-message {
            align-self: flex-end;
        }

        .message-container {
            display: flex;
            gap: 1rem;
            width: 100%;
        }

        .user-message .message-container {
            flex-direction: row-reverse;
        }

        .avatar {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-full);
            flex-shrink: 0;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--bg-secondary);
        }

        .avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .user-message .avatar {
            background-color: var(--bg-message-user);
            color: white;
        }

        .avatar i {
            font-size: 1.25rem;
        }

        .message-content {
            padding: 1rem 1.25rem;
            border-radius: var(--radius-lg);
            font-size: 0.9375rem;
            line-height: 1.5;
            max-width: calc(100% - 60px);
            box-shadow: var(--shadow-sm);
            transition: var(--transition-normal);
        }

        .bot-message .message-content {
            background-color: var(--bg-message-bot);
            color: var(--text-bot-message);
            border-top-left-radius: 0;
            box-shadow: var(--shadow-sm);
        }

        .user-message .message-content {
            background-color: var(--bg-message-user);
            color: var(--text-user-message);
            border-top-right-radius: 0;
        }

        .message-content p {
            margin-bottom: 1rem;
        }

        .message-content p:last-child {
            margin-bottom: 0;
        }

        .message-content h3 {
            margin-top: 1.25rem;
            margin-bottom: 0.75rem;
            color: var(--text-accent);
            font-size: 1.125rem;
            font-weight: 600;
        }

        .message-content h3:first-child {
            margin-top: 0;
        }

        .message-content strong {
            color: var(--text-accent);
            font-weight: 600;
        }

        .message-content ul, .message-content ol {
            margin-left: 1.25rem;
            margin-top: 0.5rem;
            margin-bottom: 1rem;
        }

        .message-content li {
            margin-bottom: 0.5rem;
        }

        .message-content code {
            background-color: var(--bg-primary);
            padding: 0.125rem 0.25rem;
            border-radius: var(--radius-sm);
            font-family: monospace;
            font-size: 0.875rem;
        }

        .message-content pre {
            background-color: var(--bg-primary);
            padding: 1rem;
            border-radius: var(--radius-md);
            overflow-x: auto;
            margin: 1rem 0;
        }

        .message-content blockquote {
            border-left: 4px solid var(--text-accent);
            padding-left: 1rem;
            margin: 1rem 0;
            color: var(--text-secondary);
        }

        /* İnput Alanı */
        .input-container-wrapper {
            padding: 1.5rem;
            background-color: var(--bg-primary);
            transition: var(--transition-normal);
        }

        .input-container {
            display: flex;
            align-items: flex-end;
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            transition: var(--transition-normal);
            padding: 0.75rem;
            box-shadow: var(--shadow-md);
            position: relative;
        }

        .input-container:focus-within {
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        #userInput {
            flex-grow: 1;
            border: none;
            border-radius: var(--radius-md);
            padding: 0.625rem 1rem;
            font-family: 'Inter', sans-serif;
            font-size: 0.9375rem;
            resize: none;
            outline: none;
            background-color: transparent;
            color: var(--text-primary);
            max-height: 200px;
            overflow-y: auto;
            transition: var(--transition-normal);
            line-height: 1.5;
        }

        #userInput::placeholder {
            color: var(--text-secondary);
        }

        #sendButton {
            background-color: var(--accent-blue);
            color: white;
            border: none;
            border-radius: var(--radius-full);
            width: 38px;
            height: 38px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition-normal);
            flex-shrink: 0;
            margin-left: 0.5rem;
        }

        #sendButton:hover {
            background-color: var(--accent-blue-hover);
        }

        #sendButton i {
            font-size: 1rem;
        }

        .info-text {
            text-align: center;
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: 0.75rem;
        }

        /* Kaydırma Çubuğu */
        ::-webkit-scrollbar {
            width: 0.375rem;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--text-secondary);
            border-radius: var(--radius-full);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-accent);
        }

        /* Özel Animasyonlar */
        .typing-indicator {
            display: flex;
            padding: 0.5rem 0;
        }

        .typing-indicator span {
            width: 6px;
            height: 6px;
            background-color: var(--text-secondary);
            border-radius: var(--radius-full);
            margin: 0 0.15rem;
            display: inline-block;
            animation: typing 1.5s infinite ease-in-out;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0% { transform: translateY(0px); }
            35% { transform: translateY(-5px); }
            70% { transform: translateY(0px); }
        }

        /* Mobil Responsive Tasarım */
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                top: 0;
                left: 0;
                width: 85%;
                max-width: 320px;
                height: 100%;
                transform: translateX(-100%);
                z-index: 100;
                box-shadow: var(--shadow-lg);
                transition: transform 0.3s ease-in-out;
            }
            
            .sidebar.open {
                transform: translateX(0);
            }
            
            .mobile-menu-toggle {
                display: block;
            }
            
            .mobile-close {
                display: block;
                position: absolute;
                top: 1.25rem;
                right: 1.25rem;
            }
            
            .chat-header {
                padding: 1rem;
            }
            
            .message {
                max-width: 100%;
            }
            
            .avatar {
                width: 32px;
                height: 32px;
            }
            
            .message-content {
                padding: 0.875rem 1rem;
                font-size: 0.875rem;
            }
            
            .input-container-wrapper {
                padding: 1rem;
            }
            
            .input-container {
                padding: 0.625rem;
            }
        }

        /* Özel Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background-color: var(--bg-secondary);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            width: 90%;
            max-width: 500px;
            box-shadow: var(--shadow-lg);
            position: relative;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.25rem;
            color: var(--text-secondary);
            cursor: pointer;
        }

        .modal-body {
            margin-bottom: 1.5rem;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 0.75rem;
        }

        .modal-button {
            padding: 0.625rem 1rem;
            border-radius: var(--radius-md);
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition-normal);
        }

        .modal-button-secondary {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-primary);
        }

        .modal-button-primary {
            background-color: var(--accent-blue);
            border: none;
            color: white;
        }

        .modal-button-primary:hover {
            background-color: var(--accent-blue-hover);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sol Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo-container">
                    <img src="https://raw.githubusercontent.com/huzaifi0604/Favicon/main/favicon.png" alt="Logo">
                    <h1>Dijital Satış Asistanı</h1>
                </div>
                <button class="mobile-close" id="mobileClose"><i class="fas fa-times"></i></button>
            </div>
            
            <button class="new-chat-btn" id="newChatBtn">
                <i class="fas fa-plus"></i> <span>Yeni Sohbet</span>
            </button>
            
            <div class="sidebar-section">
                <div class="theme-switch-container">
                    <div class="theme-text">
                        <i class="fas fa-moon"></i> Karanlık Mod
                    </div>
                    <label class="theme-switch">
                        <input type="checkbox" id="themeSwitch">
                        <span class="slider round"></span>
                    </label>
                </div>
            </div>
            
            <div class="sidebar-section">
                <div class="sidebar-section-title">Konu Başlıkları</div>
                <div class="history" id="historyContainer">
                    <div class="history-item active" data-topic="welcome">
                        <i class="fas fa-home"></i>
                        <span>Hoş Geldiniz</span>
                    </div>
                    <div class="history-item" data-topic="instagram">
                        <i class="fab fa-instagram"></i>
                        <span>Instagram Rehberi</span>
                    </div>
                    <div class="history-item" data-topic="tiktok">
                        <i class="fab fa-tiktok"></i>
                        <span>TikTok Stratejileri</span>
                    </div>
                    <div class="history-item" data-topic="dijitalurun">
                        <i class="fas fa-file-alt"></i>
                        <span>Dijital Ürün Oluşturma</span>
                    </div>
                    <div class="history-item" data-topic="yapayzekaicin">
                        <i class="fas fa-robot"></i>
                        <span>Yapay Zeka Araçları</span>
                    </div>
                    <div class="history-item" data-topic="niskonulari">
                        <i class="fas fa-bullseye"></i>
                        <span>Niş Seçimi</span>
                    </div>
                    <div class="history-item" data-topic="monetizasyon">
                        <i class="fas fa-money-bill-wave"></i>
                        <span>Monetizasyon Yöntemleri</span>
                    </div>
                    <div class="history-item" data-topic="contentplan">
                        <i class="fas fa-calendar-alt"></i>
                        <span>İçerik Planı Oluşturma</span>
                    </div>
                </div>
            </div>
            
            <div class="user-info">
                <img src="https://raw.githubusercontent.com/huzaifi0604/Favicon/main/favicon.png" alt="User">
                <span>Yusuf Yaman</span>
            </div>
        </div>

        <!-- Ana İçerik -->
        <div class="main-content">
            <!-- Üst Başlık -->
            <div class="chat-header">
                <div class="header-left">
                    <button class="mobile-menu-toggle" id="mobileMenuToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h2>Dijital Satış Asistanı</h2>
                </div>
                <div class="header-actions">
                    <button class="action-button" id="clearChatBtn" title="Sohbeti Temizle">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>

            <!-- Sohbet Alanı -->
            <div class="chat-container" id="chatContainer">
                <!-- Bot mesajları ve kullanıcı mesajları buraya gelecek -->
            </div>

            <!-- Mesaj Gönderme Alanı -->
            <div class="input-container-wrapper">
                <div class="input-container">
                    <textarea id="userInput" placeholder="Mesajınızı buraya yazın..." rows="1"></textarea>
                    <button id="sendButton">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                <div class="info-text">
                    Yusuf Yaman'ın Dijital Satış Asistanı, Google Gemini 2.0 tarafından desteklenmektedir.
                </div>
            </div>
        </div>
    </div>

    <!-- Onay Modalı -->
    <div class="modal" id="confirmModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Onay</div>
                <button class="modal-close" id="modalClose"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <p id="modalMessage">Sohbet geçmişini temizlemek istediğinize emin misiniz?</p>
            </div>
            <div class="modal-footer">
                <button class="modal-button modal-button-secondary" id="modalCancel">İptal</button>
                <button class="modal-button modal-button-primary" id="modalConfirm">Onayla</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elementleri
            const chatContainer = document.getElementById('chatContainer');
            const userInput = document.getElementById('userInput');
            const sendButton = document.getElementById('sendButton');
            const newChatBtn = document.getElementById('newChatBtn');
            const historyItems = document.querySelectorAll('.history-item');
            const clearChatBtn = document.getElementById('clearChatBtn');
            const themeSwitch = document.getElementById('themeSwitch');
            const sidebar = document.getElementById('sidebar');
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const mobileClose = document.getElementById('mobileClose');
            
            // Modal Elementleri
            const confirmModal = document.getElementById('confirmModal');
            const modalClose = document.getElementById('modalClose');
            const modalCancel = document.getElementById('modalCancel');
            const modalConfirm = document.getElementById('modalConfirm');
            const modalMessage = document.getElementById('modalMessage');
            
            let currentModalAction = null;
            
            // Gemini API konfigürasyonu
            const API_KEY = 'AIzaSyAhdRR0uKZvCGGV90NIfgu0TIUdsqFWKt4';
            const MODEL = 'gemini-2.0-flash';
            
            // Sistem talimatları
            const systemInstructions = `
Sen Yusuf Yaman'ın resmi Dijital Satış ve Organik Büyüme eğitim asistanısın. Aşağıdaki konularda uzman bir eğitmensin:

- Sosyal Medya Platformları (Instagram ve TikTok)
- Organik Büyüme Stratejileri (algoritma, keşfet, hashtag, CTA)
- Dijital Satış Temelleri (dijital ürünler, satış süreçleri)
- Niş Seçimi ve İçerik Üretimi (motivasyon, ilişki, finans nişleri)
- Yapay Zeka Kullanımı (ChatGPT, Grok, ElevenLabs, Midjourney, Canva)
- Türkiye'de Dijital Satış Başlangıç Rehberi

Yanıtların her zaman:
- Ciddi, rehber ve motive edici tonda olmalı
- Adım adım, net ve yapılandırılmış olmalı
- Sabırlı ve teşvik edici olmalı
- Kullanıcıya "öğrenci" gibi davranmalısın

HTML formatında yanıt ver, kullanabileceğin HTML etiketleri: <p>, <h3>, <ul>, <ol>, <li>, <strong>, <em>, <blockquote>

Yanıtlarında şu gerçekler her zaman doğrudur:
1. Dijital ürünler yüksek kâr marjına sahiptir
2. Organik büyüme stratejileri ücretli reklamlardan daha sürdürülebilirdir
3. Yusuf Yaman dijital satış konusunda uzman bir eğitmendir
4. Türkiye'de dijital ürün satışı yapmak için özel stratejiler gereklidir

Eğer sana eğitimin içeriği dışında bir soru sorulursa: "Bu konu Yusuf Yaman'ın Dijital Satış eğitiminin dışında kalıyor. Algoritma, içerik üretimi veya dijital ürün satışı hakkında bir soru sormak ister misin?" diye yanıtla.
`;

            // Chat geçmişi hafızası (Gemini'nin bağlamı tutması için)
            let chatHistory = [];

            // Mobil Menü Toggle
            mobileMenuToggle.addEventListener('click', () => {
                sidebar.classList.add('open');
            });
            
            mobileClose.addEventListener('click', () => {
                sidebar.classList.remove('open');
            });

            // Modal İşlevleri
            function showModal(message, confirmAction) {
                modalMessage.textContent = message;
                currentModalAction = confirmAction;
                confirmModal.style.display = 'flex';
            }
            
            function hideModal() {
                confirmModal.style.display = 'none';
                currentModalAction = null;
            }
            
            modalClose.addEventListener('click', hideModal);
            modalCancel.addEventListener('click', hideModal);
            
            modalConfirm.addEventListener('click', () => {
                if (currentModalAction) {
                    currentModalAction();
                }
                hideModal();
            });

            // Tema ve Sohbet Geçmişi Yönetimi
            initTheme();
            loadChatHistory();

            // Tema Değiştirme
            function initTheme() {
                const savedTheme = localStorage.getItem('yusufYamanTheme');
                if (savedTheme === 'dark') {
                    document.body.setAttribute('data-theme', 'dark');
                    themeSwitch.checked = true;
                }
            }

            themeSwitch.addEventListener('change', function() {
                if (this.checked) {
                    document.body.setAttribute('data-theme', 'dark');
                    localStorage.setItem('yusufYamanTheme', 'dark');
                } else {
                    document.body.removeAttribute('data-theme');
                    localStorage.setItem('yusufYamanTheme', 'light');
                }
            });

            // Sohbet Geçmişini Kaydetme ve Yükleme
            function saveChatHistory() {
                localStorage.setItem('yusufYamanChatHistory', chatContainer.innerHTML);
                // Ayrıca sohbet bağlamını da kaydedelim (Gemini için)
                localStorage.setItem('yusufYamanChatContext', JSON.stringify(chatHistory));
            }

            function loadChatHistory() {
                const savedChat = localStorage.getItem('yusufYamanChatHistory');
                const savedContext = localStorage.getItem('yusufYamanChatContext');
                
                if (savedChat && savedChat.trim() !== '') {
                    chatContainer.innerHTML = savedChat;
                } else {
                    showWelcomeMessage();
                }
                
                if (savedContext) {
                    try {
                        chatHistory = JSON.parse(savedContext);
                    } catch (e) {
                        console.error('Chat context parsing error:', e);
                        chatHistory = [];
                    }
                }
                
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }

            // Sohbeti Temizleme
            clearChatBtn.addEventListener('click', function() {
                showModal('Sohbet geçmişini temizlemek istediğinize emin misiniz?', function() {
                    chatContainer.innerHTML = '';
                    chatHistory = []; // Gemini bağlamını da temizle
                    localStorage.removeItem('yusufYamanChatHistory');
                    localStorage.removeItem('yusufYamanChatContext');
                    showWelcomeMessage();
                });
            });

            // Hoş Geldin Mesajı
            function showWelcomeMessage() {
                const welcomeMessage = `
                    <div class="message bot-message">
                        <div class="message-container">
                            <div class="avatar">
                                <img src="https://raw.githubusercontent.com/huzaifi0604/Favicon/main/favicon.png" alt="Bot Avatar">
                            </div>
                            <div class="message-content">
                                <p>Merhaba, ben Yusuf Yaman'ın Dijital Satış Asistanıyım! Size nasıl yardımcı olabilirim?</p>
                                <p>Aşağıdaki konularda uzmanlaşmış durumdayım:</p>
                                <ul>
                                    <li><strong>Instagram ve TikTok Stratejileri:</strong> Algoritma, keşfete çıkma, içerik planlaması</li>
                                    <li><strong>Dijital Ürün Oluşturma:</strong> E-book, çevrimiçi kurslar, dijital şablonlar</li>
                                    <li><strong>Yapay Zeka ile İçerik Üretimi:</strong> ChatGPT, Midjourney, ElevenLabs kullanım rehberleri</li>
                                    <li><strong>Niş Seçimi ve Pazar Araştırması:</strong> Kârlı dijital ürün nişleri bulma</li>
                                    <li><strong>Monetizasyon Stratejileri:</strong> Dijital ürünlerden para kazanma yöntemleri</li>
                                    <li><strong>İçerik Planı Oluşturma:</strong> 30-90 günlük içerik takvimi hazırlama</li>
                                </ul>
                                <p>Sorularınızı sormaya başlayabilir veya soldaki menüden bir konu seçebilirsiniz!</p>
                            </div>
                        </div>
                    </div>
                `;
                chatContainer.innerHTML = welcomeMessage;
                // Bot'un mesajını chat geçmişine ekleyelim
                chatHistory.push({
                    role: "model",
                    parts: [{ text: "Merhaba, ben Yusuf Yaman'ın Dijital Satış Asistanıyım! Size nasıl yardımcı olabilirim? Aşağıdaki konularda uzmanlaşmış durumdayım: Instagram ve TikTok Stratejileri, Dijital Ürün Oluşturma, Yapay Zeka ile İçerik Üretimi, Niş Seçimi ve Pazar Araştırması, Monetizasyon Stratejileri, İçerik Planı Oluşturma. Sorularınızı sormaya başlayabilir veya soldaki menüden bir konu seçebilirsiniz!" }]
                });
                saveChatHistory();
            }

            // Mesaj Gönderme İşlevi
            function sendMessage() {
                const message = userInput.value.trim();
                if (message === '') return;

                // Mobil görünümde, mesaj gönderilince sidebar'ı kapat
                if (window.innerWidth <= 768) {
                    sidebar.classList.remove('open');
                }

                // Kullanıcı mesajını ekle
                addMessage('user', `<p>${message}</p>`);
                
                // Kullanıcı mesajını sohbet geçmişine ekle
                chatHistory.push({
                    role: "user",
                    parts: [{ text: message }]
                });
                
                // Giriş alanını temizle
                userInput.value = '';
                userInput.style.height = 'auto';
                
                // Botun cevap vermesini sağla
                generateBotResponse(message);
            }

            // Kullanıcı veya Bot Mesajı Ekleme
            function addMessage(type, content) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${type}-message`;
                
                let html = `
                    <div class="message-container">
                `;
                
                if (type === 'bot') {
                    html += `
                        <div class="avatar">
                            <img src="https://raw.githubusercontent.com/huzaifi0604/Favicon/main/favicon.png" alt="Bot Avatar">
                        </div>
                    `;
                } else {
                    html += `
                        <div class="avatar">
                            <i class="fas fa-user"></i>
                        </div>
                    `;
                }
                
                html += `<div class="message-content">${content}</div></div>`;
                
                messageDiv.innerHTML = html;
                chatContainer.appendChild(messageDiv);
                
                // Sohbeti en aşağı kaydır
                chatContainer.scrollTop = chatContainer.scrollHeight;
                
                // Sohbet geçmişini kaydet
                saveChatHistory();
                
                return messageDiv;
            }

            // Yazıyor animasyonu
            function addTypingIndicator() {
                const loadingDiv = document.createElement('div');
                loadingDiv.className = 'message bot-message typing-message';
                loadingDiv.innerHTML = `
                    <div class="message-container">
                        <div class="avatar">
                            <img src="https://raw.githubusercontent.com/huzaifi0604/Favicon/main/favicon.png" alt="Bot Avatar">
                        </div>
                        <div class="message-content">
                            <div class="typing-indicator">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                        </div>
                    </div>
                `;
                chatContainer.appendChild(loadingDiv);
                chatContainer.scrollTop = chatContainer.scrollHeight;
                return loadingDiv;
            }
            
            // Google Gemini API ile Bot Yanıtı Oluşturma
            async function generateBotResponse(userMessage) {
                // Yazıyor göstergesi ekle
                const typingIndicator = addTypingIndicator();
                
                try {
                    // API isteği için gerekli URL ve veriler
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${MODEL}:generateContent?key=${API_KEY}`;
                    
                    // Sistem talimatlarıyla kullanıcı mesajını birleştir
                    const promptWithSystem = systemInstructions + "\n\nŞimdi, kullanıcının şu sorusuna yanıt ver: " + userMessage;
                    
                    // API isteğinde kullanılacak veri
                    const requestData = {
                        contents: [
                            {
                                role: "user",
                                parts: [{ text: promptWithSystem }]
                            },
                            ...chatHistory.slice(-6) // Son birkaç mesajı bağlam olarak ekleyelim
                        ],
                        generationConfig: {
                            temperature: 0.7,
                            maxOutputTokens: 2048,
                            topP: 0.95,
                            topK: 50
                        },
                        safetySettings: [
                            {
                                category: "HARM_CATEGORY_HARASSMENT",
                                threshold: "BLOCK_MEDIUM_AND_ABOVE"
                            },
                            {
                                category: "HARM_CATEGORY_HATE_SPEECH",
                                threshold: "BLOCK_MEDIUM_AND_ABOVE"
                            },
                            {
                                category: "HARM_CATEGORY_SEXUALLY_EXPLICIT",
                                threshold: "BLOCK_MEDIUM_AND_ABOVE"
                            },
                            {
                                category: "HARM_CATEGORY_DANGEROUS_CONTENT",
                                threshold: "BLOCK_MEDIUM_AND_ABOVE"
                            }
                        ]
                    };
                    
                    // CORS sorunu çözümü için proxy kullanımı
                    // Not: Bu bir workaround, ideal olarak kendi backend'inizi kullanmalısınız
                    const proxyUrl = 'https://cors-anywhere.herokuapp.com/';
                    const finalUrl = apiUrl;
                    
                    // Gerçek API çağrısı öncesinde yapay gecikme ekleyelim (daha gerçekçi olması için)
                    await new Promise(resolve => setTimeout(resolve, 1500));
                    
                    // API'ye istek gönder
                    const response = await fetch(finalUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(requestData)
                    });
                    
                    // API yanıtını al
                    const data = await response.json();
                    
                    // Yazıyor göstergesini kaldır
                    typingIndicator.remove();
                    
                    // API yanıtını kontrol et ve ekle
                    if (data.candidates && data.candidates[0] && data.candidates[0].content && data.candidates[0].content.parts && data.candidates[0].content.parts[0].text) {
                        const aiResponse = data.candidates[0].content.parts[0].text;
                        
                        // Yanıtı sohbet geçmişine ekle
                        chatHistory.push({
                            role: "model",
                            parts: [{ text: aiResponse }]
                        });
                        
                        // Yanıtı ekrana ekle
                        addMessage('bot', aiResponse);
                    } else {
                        // Fallback: Eğer API yanıt vermezse yedek yanıt
                        const fallbackResponse = `
                            <p>Özür dilerim, şu anda bir teknik sorun yaşıyorum ve Gemini API'ye bağlanamıyorum. Size şu konularda yardımcı olabilirim:</p>
                            <ul>
                                <li><strong>Instagram ve TikTok büyüme stratejileri</strong> hakkında sorular sorabilirsiniz</li>
                                <li><strong>Dijital ürün oluşturma ve satış</strong> konusunda bilgi alabilirsiniz</li>
                                <li><strong>Yapay zeka ile içerik üretimi</strong> hakkında ipuçları isteyebilirsiniz</li>
                                <li><strong>İçerik planlaması ve niş seçimi</strong> ile ilgili danışabilirsiniz</li>
                            </ul>
                            <p>Lütfen tekrar sorunuzu sorar mısınız? Alternatif olarak, soldaki menüden bir konu seçebilirsiniz.</p>
                        `;
                        
                        // Yedek yanıtı ekle
                        addMessage('bot', fallbackResponse);
                    }
                } catch (error) {
                    console.error('API Hatası:', error);
                    
                    // Yazıyor göstergesini kaldır
                    typingIndicator.remove();
                    
                    // Hata mesajını göster
                    addMessage('bot', `
                        <p>Üzgünüm, bir teknik sorun oluştu. Bu genellikle aşağıdaki nedenlerden kaynaklanır:</p>
                        <ul>
                            <li>CORS politikası sorunları (tarayıcı kaynaklı)</li>
                            <li>API anahtarı limitleri veya kısıtlamaları</li>
                            <li>Geçici sunucu sorunları</li>
                        </ul>
                        <p>Lütfen tekrar deneyin veya soldaki menüden bir konu seçerek devam edin.</p>
                        <p><em>Teknik detay: ${error.message}</em></p>
                    `);
                }
            }

            // Yeni Sohbet Başlatma
            newChatBtn.addEventListener('click', function() {
                showModal('Yeni bir sohbet başlatmak istediğinize emin misiniz? Mevcut sohbet geçmişi silinecektir.', function() {
                    chatContainer.innerHTML = '';
                    chatHistory = []; // Gemini bağlamını da temizle
                    localStorage.removeItem('yusufYamanChatHistory');
                    localStorage.removeItem('yusufYamanChatContext');
                    showWelcomeMessage();
                });
            });

            // Sohbet Geçmişi Öğesi Seçme
            historyItems.forEach(item => {
                item.addEventListener('click', function() {
                    document.querySelector('.history-item.active').classList.remove('active');
                    this.classList.add('active');
                    
                    // Mobil görünümde, konu seçilince sidebar'ı kapat
                    if (window.innerWidth <= 768) {
                        sidebar.classList.remove('open');
                    }
                    
                    // Konu bazlı ekstra içerik gösterme
                    const topic = this.getAttribute('data-topic');
                    if (topic) {
                        chatContainer.innerHTML = '';
                        chatHistory = []; // Gemini bağlamını da temizle
                        
                        if (topic === 'welcome') {
                            showWelcomeMessage();
                        } else if (topic === 'instagram') {
                            addMessage('user', '<p>Instagram\'da keşfete nasıl çıkarım?</p>');
                            chatHistory.push({
                                role: "user",
                                parts: [{ text: "Instagram'da keşfete nasıl çıkarım?" }]
                            });
                            generateBotResponse("Instagram'da keşfete nasıl çıkarım?");
                        } else if (topic === 'tiktok') {
                            addMessage('user', '<p>TikTok\'ta viral olmak için ne yapmalıyım?</p>');
                            chatHistory.push({
                                role: "user",
                                parts: [{ text: "TikTok'ta viral olmak için ne yapmalıyım?" }]
                            });
                            generateBotResponse("TikTok'ta viral olmak için ne yapmalıyım?");
                        } else if (topic === 'dijitalurun') {
                            addMessage('user', '<p>Dijital ürün nasıl oluşturulur?</p>');
                            chatHistory.push({
                                role: "user",
                                parts: [{ text: "Dijital ürün nasıl oluşturulur?" }]
                            });
                            generateBotResponse("Dijital ürün nasıl oluşturulur?");
                        } else if (topic === 'yapayzekaicin') {
                            addMessage('user', '<p>Yapay zeka ile içerik üretimi nasıl yapılır?</p>');
                            chatHistory.push({
                                role: "user",
                                parts: [{ text: "Yapay zeka ile içerik üretimi nasıl yapılır?" }]
                            });
                            generateBotResponse("Yapay zeka ile içerik üretimi nasıl yapılır?");
                        } else if (topic === 'niskonulari') {
                            addMessage('user', '<p>Dijital ürün satışı için hangi nişi seçmeliyim?</p>');
                            chatHistory.push({
                                role: "user",
                                parts: [{ text: "Dijital ürün satışı için hangi nişi seçmeliyim?" }]
                            });
                            generateBotResponse("Dijital ürün satışı için hangi nişi seçmeliyim?");
                        } else if (topic === 'monetizasyon') {
                            addMessage('user', '<p>Dijital içeriklerden nasıl para kazanabilirim?</p>');
                            chatHistory.push({
                                role: "user",
                                parts: [{ text: "Dijital içeriklerden nasıl para kazanabilirim?" }]
                            });
                            generateBotResponse("Dijital içeriklerden nasıl para kazanabilirim?");
                        } else if (topic === 'contentplan') {
                            addMessage('user', '<p>Etkili bir içerik planı nasıl oluşturabilirim?</p>');
                            chatHistory.push({
                                role: "user",
                                parts: [{ text: "Etkili bir içerik planı nasıl oluşturabilirim?" }]
                            });
                            generateBotResponse("Etkili bir içerik planı nasıl oluşturabilirim?");
                        }
                    }
                });
            });

            // Enter Tuşu ile Gönderme
            userInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });

            // Gönder Butonuna Tıklanınca
            sendButton.addEventListener('click', sendMessage);
            
            // Textarea Yükseklik Ayarlama
            userInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = (this.scrollHeight) + 'px';
                // Maksimum yükseklik
                if (this.scrollHeight > 200) {
                    this.style.height = '200px';
                    this.style.overflowY = 'auto';
                }
            });

            // Sayfa kapanmadan önce sohbeti kaydet
            window.onbeforeunload = function() {
                saveChatHistory();
            };
        });
    </script>
</body>
</html>
